<!-- ref -->
<!-- https://javascript.info/shadow-dom-events -->

<div id="outer"></div>

<script>
  outer.attachShadow({ mode: "open" });

  let inner = document.createElement("div");
  outer.shadowRoot.append(inner);

  /*
div(id=outer)
  #shadow-dom
    div(id=inner)
*/

  document.addEventListener("test", (event) => alert(event.detail));

  inner.dispatchEvent(
    new CustomEvent("test", {
      bubbles: true,
      composed: true,
      detail: "composed",
    })
  );

  inner.dispatchEvent(
    new CustomEvent("test", {
      bubbles: true,
      composed: false,
      detail: "not composed",
    })
  );
</script>
